<div class="asset-upload-container">
  <div
    class="drop-zone"
    [class.dragging]="isDragging()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
  >
    <div class="drop-zone-content">
      <svg
        class="upload-icon"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
        />
      </svg>
      <p class="drop-zone-text">Drag and drop files here</p>
      <p class="drop-zone-subtext">or</p>
      <label class="file-select-button">
        <input
          type="file"
          multiple
          accept="image/*,video/*"
          (change)="onFileSelect($event)"
          class="file-input"
        />
        Browse Files
      </label>
      <p class="file-types">Supported: Images and Videos</p>
    </div>
  </div>

  @if (hasFiles) {
  <div class="files-list">
    <div class="files-header">
      <h3>Files ({{ files().length }})</h3>
      <div class="header-actions">
        @if (hasPendingFiles && !isUploading()) {
        <button (click)="uploadFiles()" class="btn btn-primary">
          Upload All
        </button>
        } @if (hasSuccessfulFiles) {
        <button (click)="clearCompleted()" class="btn btn-secondary">
          Clear Completed
        </button>
        }
        <button (click)="clearAll()" class="btn btn-danger">Clear All</button>
      </div>
    </div>

    <div class="files-items">
      @for (file of files(); track $index) {
      <div class="file-item" [class]="'status-' + file.status">
        <div class="file-info">
          <div class="file-icon">
            @if (file.file.type.startsWith('image/')) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
              />
            </svg>
            } @else if (file.file.type.startsWith('video/')) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
              />
            </svg>
            }
          </div>
          <div class="file-details">
            <div class="file-name">{{ file.file.name }}</div>
            <div class="file-size">{{ formatFileSize(file.file.size) }}</div>
          </div>
        </div>

        <div class="file-status">
          @if (file.status === 'pending') {
          <span class="status-badge pending">Pending</span>
          } @else if (file.status === 'uploading') {
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="file.progress"></div>
          </div>
          } @else if (file.status === 'success') {
          <span class="status-badge success">✓ Uploaded</span>
          } @else if (file.status === 'error') {
          <span class="status-badge error">✗ Failed</span>
          }
        </div>

        <button
          (click)="removeFile($index)"
          class="remove-button"
          [disabled]="file.status === 'uploading'"
        >
          ×
        </button>
      </div>
      }
    </div>
  </div>
  }
</div>
